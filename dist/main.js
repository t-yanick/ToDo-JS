(()=>{"use strict";!function(){var t=document.querySelector("#content"),e=document.createElement("div");e.setAttribute("id","headingContainer");var o=document.createElement("h1");o.textContent="Todo List",e.append(o),t.append(e);var n=document.createElement("div");n.setAttribute("id","projectAndTodoContainer"),t.append(n);var r=document.createElement("div");r.setAttribute("id","projects"),n.append(r);var i=document.createElement("div");i.setAttribute("id","projectsListContainer"),r.append(i)}();var t=[];0==localStorage.length&&t.push("Default Project");var e=function(){function e(){t.forEach((function(e){""!=e&&localStorage.setItem("projectList",t)}))}function o(){0==localStorage.length?e():localStorage.projectList.split(",").forEach((function(e){t.includes(e)&&0!=t.length||t.push(e)}))}return{projectList:t,setProjectList:e,getProjectList:o,addProjectToList:function(n){o(),t.push(n),e()},removeProjectFromList:function(n){o(),t.length>1?(t.splice(t.indexOf(n.title),1),e()):1==t.length&&(t.pop(),localStorage.removeItem("projectList"))}}}(),o=function(t){var e=[];t.projectTodoList.forEach((function(o){localStorage.setItem(t.title+" "+o.title+" todo info",o.todoInfo),e.push(o.title)})),localStorage.setItem(t.title+" project todo list",e)},n=function(){r.forEach((function(t){null!=localStorage.getItem(t.title+" project todo list")&&localStorage.getItem(t.title+" project todo list").split(",").forEach((function(e){t.projectTodoListTitles.includes(e)||t.projectTodoListTitles.push(e)}))}))},r=[];function i(){e.getProjectList();var t=[];r.forEach((function(e){t.push(e.title)})),e.projectList.forEach((function(e){if(!t.includes(e)){var o={title:e,projectTodoList:n=[],projectTodoListTitles:[],addToProjectTodoList:function(t){n.push(t)},removeFromProjectList:function(t){n.splice(n.indexOf(t),1)}};return r.push(o)}var n}))}var a=function(t,e,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"None",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Incomplete",i=[t,e,o,n,r];return{title:t,dueDate:e,priority:o,note:n,doneStatus:r,todoInfo:i}};function c(){r.forEach((function(t){t.projectTodoListTitles.length>0&&t.projectTodoListTitles.forEach((function(e){var o=localStorage.getItem(t.title+" "+e+" todo info");if(""!=o&&null!=o){var n=localStorage[t.title+" "+e+" todo info"].split(","),r=a(n[0],n[1],n[2],n[3],n[4]),i=[];t.projectTodoList.forEach((function(t){i.push(t.title)})),i.includes(e)||t.addToProjectTodoList(r)}}))}))}var d=document.querySelector("#content"),l=function t(e){var n=document.createElement("div");n.setAttribute("id","todoContainer"),e.projectTodoList.length>0&&e.projectTodoList.forEach((function(r){var i=document.createElement("div");"Complete"==r.doneStatus?i.setAttribute("class","todoCompleted"):"Incomplete"==r.doneStatus&&"High"==r.priority?i.setAttribute("class","todoHighPriority"):"Incomplete"==r.doneStatus&&"Medium"==r.priority?i.setAttribute("class","todoMediumPriority"):"Incomplete"==r.doneStatus&&"Low"==r.priority&&i.setAttribute("class","todoLowPriority");var l=document.createElement("div");l.setAttribute("class","todoInfo");var u=document.createElement("p");u.setAttribute("class","todoTitle"),u.append(r.title);var s=document.createElement("div");s.setAttribute("class","dueDateContainer");var p=document.createElement("p");p.setAttribute("class","todoDueDateHeading"),null!=r.dueDate&&""!=r.dueDate&&(p.textContent="Due Date: "+r.dueDate);var m=document.createElement("div");m.setAttribute("class","todoPriorityContainer");var v=document.createElement("p");v.setAttribute("class","priorityHeading"),v.textContent="Priority: "+r.priority;var E=document.createElement("p");E.setAttribute("class","todoNote"),null!=r.note&&""!=i.note&&(E.textContent="Note: \n"+r.note),s.append(p),m.append(v),l.append(u,s,m,E),i.append(l);var b=document.createElement("button");b.setAttribute("class","todoRemoveBtn"),b.textContent="X",b.addEventListener("click",(function(t){e.removeFromProjectList(r),o(e),localStorage.removeItem(e.title+" "+r.title+" todo info",i.todoInfo),0==localStorage[e.title+" project todo list"].length&&localStorage.removeItem(e.title+" project todo list"),i.remove()})),i.append(b);var f=document.createElement("button");f.setAttribute("class","btn"),f.textContent="Edit",f.addEventListener("click",(function(l){f.remove();var u=document.createElement("div");u.setAttribute("id","editTodoPopup"),i.append(u);var s=document.createElement("p");s.setAttribute("class","todoTitleText"),s.textContent="Title:",u.append(s);var p=document.createElement("input");p.setAttribute("class","todoTitleInput"),p.value=r.title,u.append(p);var m=document.createElement("p");m.setAttribute("id","todoDueText"),m.textContent="Due:",u.append(m);var v=document.createElement("input");v.setAttribute("class","todoDueDateInput"),v.setAttribute("type","date"),v.value=r.dueDate,u.append(v);var E=document.createElement("label");E.setAttribute("for","todoPriorityInput"),E.textContent="Priority: ";var b=document.createElement("select");b.setAttribute("name","todoPriorityInput"),b.setAttribute("class","todoPriorityInput");var j=document.createElement("option");j.setAttribute("value","Low"),j.textContent="Low";var L=document.createElement("option");L.setAttribute("value","Medium"),L.textContent="Medium";var T=document.createElement("option");T.setAttribute("value","High"),T.textContent="High",b.append(T,L,j),u.append(E,b);var C=document.createElement("label");C.setAttribute("class","todoNoteInputLabel"),C.setAttribute("for","todoNoteInput"),C.textContent="Note:";var g=document.createElement("input");g.setAttribute("class","todoNoteInput"),u.append(C,g);var x=document.createElement("p");x.setAttribute("class","noNameError"),x.textContent="Enter a name!";var h=document.createElement("button");h.setAttribute("class","btn"),h.textContent="Save",h.addEventListener("click",(function(i){if(""==p.value){if(!u.contains(x))return void u.append(x)}else{var l=document.querySelector(".todoTitleInput"),s=a(l.value,v.value,b.value,g.value);e.projectTodoList.splice(e.projectTodoList.indexOf(r),1,s),e.projectTodoListTitles.splice(e.projectTodoListTitles.indexOf(r),1,s.title),localStorage.removeItem(e.title+" "+r.title+" todo info"),d.contains(n)&&n.remove(),o(e),c(),t(e),A.insertAdjacentElement("beforebegin",f)}})),u.append(h)})),i.append(f);var A=document.createElement("button");A.setAttribute("class","btn"),A.textContent="Complete",A.addEventListener("click",(function(l){switch(r.doneStatus){case"Incomplete":var u=a(r.title,r.dueDate,r.priority,r.note,"Complete");i.setAttribute("class","todoCompleted"),e.projectTodoList.splice(e.projectTodoList.indexOf(r),1,u),e.projectTodoListTitles.splice(e.projectTodoListTitles.indexOf(r),1,u.title);break;case"Complete":var s=a(r.title,r.dueDate,r.priority,r.note,"Incomplete");i.setAttribute("class","todo"),e.projectTodoList.splice(e.projectTodoList.indexOf(r),1,s),e.projectTodoListTitles.splice(e.projectTodoListTitles.indexOf(r),1,s.title)}d.contains(n)&&n.remove(),localStorage.removeItem(e.title+" "+r.title+" todo info"),o(e),c(),t(e)})),i.append(A),n.insertAdjacentElement("afterbegin",i)}));var r=document.createElement("div");r.setAttribute("class","todoCreateBtnContainer");var i=document.createElement("button");i.setAttribute("class","todoCreateBtn"),i.textContent="New Todo",i.addEventListener("click",(function(l){i.remove();var u=document.createElement("div");u.setAttribute("id","createTodoPopup"),n.insertAdjacentElement("afterbegin",u);var s=document.createElement("p");s.setAttribute("id","todoTitleText"),s.textContent="Title:",u.append(s);var p=document.createElement("input");p.setAttribute("class","todoTitleInput"),u.append(p);var m=document.createElement("p");m.setAttribute("id","todoDueText"),m.textContent="Due:",u.append(m);var v=document.createElement("input");v.setAttribute("class","todoDueDateInput"),v.setAttribute("type","date"),u.append(v);var E=document.createElement("label");E.setAttribute("for","todoPriorityInput"),E.textContent="Priority:";var b=document.createElement("select");b.setAttribute("name","todoPriorityInput"),b.setAttribute("class","todoPriorityInput");var f=document.createElement("option");f.setAttribute("value","Low"),f.textContent="Low";var A=document.createElement("option");A.setAttribute("value","Medium"),A.textContent="Medium";var j=document.createElement("option");j.setAttribute("value","High"),j.textContent="High",b.append(j,A,f),u.append(E,b);var L=document.createElement("label");L.setAttribute("class","todoNoteInputLabel"),L.setAttribute("for","todoNoteInput"),L.textContent="Note:";var T=document.createElement("input");T.setAttribute("class","todoNoteInput"),u.append(L,T);var C=document.createElement("p");C.setAttribute("class","noNameError"),C.textContent="Enter a name!";var g=document.createElement("button");g.setAttribute("class","btn"),g.textContent="Save",g.addEventListener("click",(function(l){if(""==p.value){if(!u.contains(C))return void u.append(C)}else{var s=document.querySelector(".todoTitleInput"),m=a(s.value,v.value,b.value,T.value);e.projectTodoList.push(m),d.contains(n)&&n.remove(),o(e),c(),e.projectTodoListTitles.push(s.value),t(e),r.append(i)}})),u.append(g)})),r.append(i),n.insertAdjacentElement("afterbegin",r),projectAndTodoContainer.append(n)},u=document.querySelector("#content"),s=function(t){var o=document.createElement("div");o.setAttribute("class","project");var i=document.createElement("p");i.setAttribute("class","projectTitle"),i.append(t.title),o.append(i),projectsListContainer.append(o);var a=document.createElement("button");a.setAttribute("class","projectRemoveBtn"),a.textContent="X",a.addEventListener("click",(function(n){var i=document.createElement("div");i.setAttribute("id","pageOverlay"),i.addEventListener("click",(function(t){i.remove()}));var a=document.createElement("div");a.setAttribute("id","removeProjectCheckContainer");var c=document.createElement("p");c.textContent="Are you sure you want to remove this project? \n All todo items will be lost.";var d=document.createElement("button");d.setAttribute("class","removeCheckBtn"),d.textContent="Remove",d.addEventListener("click",(function(n){t.projectTodoList.forEach((function(e){localStorage.removeItem(t.title+" "+e.title+" todo info")})),localStorage.removeItem(t.title+" project todo list"),function(t){r.length>1?r.splice(r.indexOf(t),1):1==r.length&&(r=[])}(t),e.removeProjectFromList(t),i.remove(),o.remove(),todoContainer.remove()}));var l=document.createElement("button");l.setAttribute("class","removeCheckBtn"),l.textContent="Cancel",l.addEventListener("click",(function(t){i.remove()})),a.append(c,d,l),i.append(a),u.insertAdjacentElement("afterbegin",i)})),o.append(a),o.addEventListener("click",(function(e){var o=document.querySelector("#todoContainer");u.contains(o)&&o.remove(),n(),c(),l(t)}))},p=function(){r.forEach((function(t){s(t)}))};(function(){var o=document.createElement("div");o.setAttribute("id","projectCreateBtnContainer");var n=document.createElement("button");n.setAttribute("id","projectCreateBtn"),n.textContent="Create Project",n.addEventListener("click",(function(r){n.remove();var a=document.createElement("div");a.setAttribute("id","createProjectPopup"),projects.insertAdjacentElement("afterbegin",a);var c=document.createElement("p");c.setAttribute("id","projectTitleText"),c.textContent="Title:",a.append(c);var d=document.createElement("input");d.setAttribute("id","projectTitleInput"),d.setAttribute("placeholder","New Project"),a.append(d);var l=document.createElement("p");l.setAttribute("class","projectExistsError"),l.textContent="Project already exists!";var u=document.createElement("p");u.setAttribute("class","noNameError"),u.textContent="Enter a name!";var s=document.createElement("button");s.textContent="Save",s.setAttribute("class","btn"),s.addEventListener("click",(function(r){if(t.includes(d.value)){if(!a.contains(l))return void a.insertAdjacentElement("afterend",l)}else{if(""==d.value)return void a.insertAdjacentElement("afterend",u);""!=d.value&&(e.addProjectToList(d.value),i(),a.remove(),d.remove(),s.remove(),o.append(n),projectsListContainer.innerHTML="",p())}})),a.append(s)})),o.append(n),projects.insertAdjacentElement("afterbegin",o)})(),e.getProjectList(),e.setProjectList(),i(),p()})();